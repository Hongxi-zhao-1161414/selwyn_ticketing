{% extends "base.html" %}

{% block title %}Customer Summary - {{ customer.first_name }} {{ customer.family_name }}{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h2>{{ customer.first_name }} {{ customer.family_name }}</h2>
        <p><strong>Date of Birth:</strong> {{ customer.date_of_birth|format_date }}</p>
        <p><strong>Email:</strong> {{ customer.email }}</p>
    </div>
    <div>
        <a href="{{ url_for('edit_customer', customer_id=customer.customer_id) }}" class="btn btn-warning">Edit</a>
        <a href="{{ url_for('customers') }}" class="btn btn-secondary">Back to Customers</a>
    </div>
</div>

<h3>Ticket Purchases</h3>
<p class="lead">Total Tickets: {{ total_tickets }}</p>

{% if purchases %}
<table class="table table-striped">
    <thead>
        <tr>
            <th>Event</th>
            <th>Event Date</th>
            <th>Tickets Purchased</th>
        </tr>
    </thead>
    <tbody>
        {% for purchase in purchases %}
        <tr>
            <td>{{ purchase.event_name }}</td>
            <td>{{ purchase.event_date|format_date }}</td>
            <td>{{ purchase.tickets_purchased }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div class="alert alert-info">This customer hasn't purchased any tickets yet.</div>
{% endif %}
{% endblock %}
